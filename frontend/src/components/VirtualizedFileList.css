/* Virtualized File List Performance Optimizations - Zen Theme */
/* FIXED CSS - Preventing overlap issues */

.virtualized-file-list {
    /* Use GPU acceleration for smooth scrolling */
    transform: translateZ(0);
    will-change: scroll-position;
    
    /* Optimize rendering */
    contain: layout style paint;
    
    /* Prevent layout thrashing */
    overflow-anchor: none;
    
    /* Enhanced spacing for zen design */
    padding: var(--zen-space-xl);
    gap: var(--zen-space-sm);
}

.virtualized-file-list .file-item {
    /* CRITICAL: Ensure file items are contained and don't overlap */
    contain: layout style paint !important;
    overflow: hidden !important;
    box-sizing: border-box !important;
    
    /* Fixed height to match ITEM_HEIGHT in JS (88px) */
    height: 88px !important;
    min-height: 88px !important;
    max-height: 88px !important;
    
    /* Prevent any transforms or shadows that could cause overlap */
    transform: none !important;
    box-shadow: none !important;
    will-change: background-color, border-color !important;
    
    /* Zen spacing and design - constrained */
    margin: 0 !important;
    border-radius: var(--zen-radius-md);
    
    /* Ensure consistent positioning */
    position: relative !important;
    
    /* Essential transitions only */
    transition: background-color 150ms ease, border-color 150ms ease, color 150ms ease, opacity 150ms ease;
}

/* Override any hover effects that might cause expansion */
.virtualized-file-list .file-item:hover,
.virtualized-file-list .file-item:active,
.virtualized-file-list .file-item.selected,
.virtualized-file-list .file-item.selected:hover {
    /* Absolutely no transforms, shadows, or size changes */
    transform: none !important;
    box-shadow: none !important;
    scale: none !important;
    will-change: background-color, border-color !important;
    
    /* Keep the same height constraints */
    height: 88px !important;
    min-height: 88px !important;
    max-height: 88px !important;
}

/* Keep scrollbar optimizations */
.file-list::-webkit-scrollbar {
    width: 6px;
    background-color: transparent;
}

.file-list::-webkit-scrollbar-track {
    background-color: transparent;
    border-radius: 3px;
}

.file-list::-webkit-scrollbar-thumb {
    background-color: var(--zen-border);
    border-radius: 3px;
}

.file-list::-webkit-scrollbar-thumb:hover {
    background-color: var(--zen-border-focus);
}

/* Prevent horizontal scrollbar from appearing */
.file-list::-webkit-scrollbar-horizontal {
    display: none;
}

/* Ensure virtual container positioning is correct */
.virtualized-file-list > div {
    position: relative !important;
    overflow: hidden !important;
}

/* Loading state optimizations */
.file-list .loading-overlay {
    /* Use backdrop-filter for better performance */
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    
    /* Optimize positioning */
    position: absolute;
    inset: 0;
    
    /* Prevent interaction during loading */
    pointer-events: none;
    
    /* Use flexbox for centering with zen spacing */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: var(--zen-space-lg);
    
    /* Zen theme background */
    background: rgba(250, 250, 250, 0.8);
    color: var(--zen-text-tertiary);
}

/* Memory-efficient animations with zen timing */
@media (prefers-reduced-motion: no-preference) {
    .file-list .file-item {
        transition: opacity 150ms ease-out, background-color 150ms ease-out, border-color 150ms ease-out;
    }
}

/* High DPI optimizations */
@media (-webkit-min-device-pixel-ratio: 2) {
    .file-list {
        /* Optimize for high DPI displays */
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
}

/* Dark mode support for loading overlay */
@media (prefers-color-scheme: dark) {
    .file-list .loading-overlay {
        background: rgba(26, 35, 50, 0.8);
    }
}

/* Remove all the complex override CSS since we're using normal file list styling now */
/* All the transform and positioning overrides are no longer needed */ 